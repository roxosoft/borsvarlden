@using borsvarlden.ViewModels;
@model IndexNewsViewModel;

<div class="index-article-feed">
    
    @if (Model.News.Count > 0 && Model.News[0].IsTopFinwireNews)
    {
        <div class="top-finwire-news ">
            @await Html.PartialAsync("_Article", Model.News[0])
        </div>
        Model.News.RemoveAt(0);
    }

    @while (Model.News.Count > 0)
    {
        int indexInChunk = 0;
        foreach (var news in Model.News.Take(Model.FirstBigBlockCount))
        {
            news.IsBigBlock = true;
            <div class="big-block article">
                @await Html.PartialAsync("_Article", news)
            </div>
            indexInChunk++;
        }

        foreach (var news in Model.News.Skip(Model.FirstBigBlockCount).Take(Model.FirstSmallBlockCount))
        {
            <div class="small-block article">
                @await Html.PartialAsync("_Article", news)
            </div>
            indexInChunk++;
        }

        foreach (var news in Model.News.Skip(Model.FirstBigBlockCount + Model.FirstSmallBlockCount).Take(Model.SecondBigBlockCount))
        {
            news.IsBigBlock = true;
            <div class="big-block article">
                @await Html.PartialAsync("_Article", news)
            </div>
            indexInChunk++;
        }

        foreach (var news in Model.News.Skip(Model.FirstBigBlockCount + Model.FirstSmallBlockCount + Model.SecondBigBlockCount).Take(Model.SecondSmallBlockCount))
        {
            <div class="small-block article">
                @await Html.PartialAsync("_Article", news)
            </div>
            indexInChunk++;
        }

        Model.News.RemoveRange(0, indexInChunk);
    }
</div>
